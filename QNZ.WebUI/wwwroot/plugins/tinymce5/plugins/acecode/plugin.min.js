(function(){"use strict";function c(){t.add("acecode",function(n){return o.register(n),h.register(n),{}})}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=function(n,t){n.focus();n.undoManager.transact(function(){n.setContent(t)});n.selection.setCursorLocation();n.nodeChanged()},r=function(n){return n.getContent({source_view:!0})},u={setContent:i,getContent:r},f=function(n){var t=u.getContent(n);n.windowManager.openUrl({title:"Source Code",url:"/plugins/tinymce5/plugins/acecode/source.html",buttons:[{type:"custom",name:"insert-and-close",text:"确定",primary:!0,align:"end"},{type:"cancel",name:"cancel",text:"关闭"}],width:1200,height:700,onAction:function(n){n.sendMessage({mceAction:"customInsertAndClose",content:t})},onMessage:function(n,t){console.log("111"+t);switch(t.mceAction){}}})},n={open:f},e=function(t){t.addCommand("mceCodeEditor",function(){n.open(t)})},o={register:e},s=function(t){t.ui.registry.addButton("code",{text:"Open Dialog",icon:"frame",onAction:()=>n.open(t)});t.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:function(){return n.open(t)}});t.addCommand("iframeCommand",function(n,i){t.setContent(`${i}`)})},h={register:s};c()})();