if(typeof jQuery!="undefined"){mejs.$=jQuery}else if(typeof ender!="undefined"){mejs.$=ender}(function($){mejs.MepDefaults={poster:"",showPosterWhenEnded:false,defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,defaultAudioWidth:400,defaultAudioHeight:30,defaultSeekBackwardInterval:function(media){return media.duration*.05},defaultSeekForwardInterval:function(media){return media.duration*.05},setDimensions:true,audioWidth:-1,audioHeight:-1,startVolume:.8,loop:false,autoRewind:true,enableAutosize:true,alwaysShowHours:false,showTimecodeFrameCount:false,framesPerSecond:25,autosizeProgress:true,alwaysShowControls:false,hideVideoControlsOnLoad:false,clickToPlayPause:true,iPadUseNativeControls:false,iPhoneUseNativeControls:false,AndroidUseNativeControls:false,features:["playpause","current","progress","duration","tracks","volume","fullscreen"],isVideo:true,enableKeyboard:true,pauseOtherPlayers:true,keyActions:[{keys:[32,179],action:function(player,media){if(media.paused||media.ended){player.play()}else{player.pause()}}},{keys:[38],action:function(player,media){player.container.find(".mejs-volume-slider").css("display","block");if(player.isVideo){player.showControls();player.startControlsTimer()}var newVolume=Math.min(media.volume+.1,1);media.setVolume(newVolume)}},{keys:[40],action:function(player,media){player.container.find(".mejs-volume-slider").css("display","block");if(player.isVideo){player.showControls();player.startControlsTimer()}var newVolume=Math.max(media.volume-.1,0);media.setVolume(newVolume)}},{keys:[37,227],action:function(player,media){if(!isNaN(media.duration)&&media.duration>0){if(player.isVideo){player.showControls();player.startControlsTimer()}var newTime=Math.max(media.currentTime-player.options.defaultSeekBackwardInterval(media),0);media.setCurrentTime(newTime)}}},{keys:[39,228],action:function(player,media){if(!isNaN(media.duration)&&media.duration>0){if(player.isVideo){player.showControls();player.startControlsTimer()}var newTime=Math.min(media.currentTime+player.options.defaultSeekForwardInterval(media),media.duration);media.setCurrentTime(newTime)}}},{keys:[70],action:function(player,media){if(typeof player.enterFullScreen!="undefined"){if(player.isFullScreen){player.exitFullScreen()}else{player.enterFullScreen()}}}},{keys:[77],action:function(player,media){player.container.find(".mejs-volume-slider").css("display","block");if(player.isVideo){player.showControls();player.startControlsTimer()}if(player.media.muted){player.setMuted(false)}else{player.setMuted(true)}}}]};mejs.mepIndex=0;mejs.players={};mejs.MediaElementPlayer=function(node,o){if(!(this instanceof mejs.MediaElementPlayer)){return new mejs.MediaElementPlayer(node,o)}var t=this;t.$media=t.$node=$(node);t.node=t.media=t.$media[0];if(typeof t.node.player!="undefined"){return t.node.player}else{t.node.player=t}if(typeof o=="undefined"){o=t.$node.data("mejsoptions")}t.options=$.extend({},mejs.MepDefaults,o);t.id="mep_"+mejs.mepIndex++;mejs.players[t.id]=t;t.init();return t};mejs.MediaElementPlayer.prototype={hasFocus:false,controlsAreVisible:true,init:function(){var t=this,mf=mejs.MediaFeatures,meOptions=$.extend(true,{},t.options,{success:function(media,domNode){t.meReady(media,domNode)},error:function(e){t.handleError(e)}}),tagName=t.media.tagName.toLowerCase();t.isDynamic=tagName!=="audio"&&tagName!=="video";if(t.isDynamic){t.isVideo=t.options.isVideo}else{t.isVideo=tagName!=="audio"&&t.options.isVideo}if(mf.isiPad&&t.options.iPadUseNativeControls||mf.isiPhone&&t.options.iPhoneUseNativeControls){t.$media.attr("controls","controls");if(mf.isiPad&&t.media.getAttribute("autoplay")!==null){t.play()}}else if(mf.isAndroid&&t.options.AndroidUseNativeControls){}else{t.$media.removeAttr("controls");var videoPlayerTitle=t.isVideo?mejs.i18n.t("Video Player"):mejs.i18n.t("Audio Player");$('<span class="mejs-offscreen">'+videoPlayerTitle+"</span>").insertBefore(t.$media);t.container=$('<div id="'+t.id+'" class="mejs-container '+(mejs.MediaFeatures.svg?"svg":"no-svg")+'" tabindex="0" role="application" aria-label="'+videoPlayerTitle+'">'+'<div class="mejs-inner">'+'<div class="mejs-mediaelement"></div>'+'<div class="mejs-layers"></div>'+'<div class="mejs-controls"></div>'+'<div class="mejs-clear"></div>'+"</div>"+"</div>").addClass(t.$media[0].className).insertBefore(t.$media).focus(function(e){if(!t.controlsAreVisible){t.showControls(true);var playButton=t.container.find(".mejs-playpause-button > button");playButton.focus()}});t.container.addClass((mf.isAndroid?"mejs-android ":"")+(mf.isiOS?"mejs-ios ":"")+(mf.isiPad?"mejs-ipad ":"")+(mf.isiPhone?"mejs-iphone ":"")+(t.isVideo?"mejs-video ":"mejs-audio "));if(mf.isiOS){var $newMedia=t.$media.clone();t.container.find(".mejs-mediaelement").append($newMedia);t.$media.remove();t.$node=t.$media=$newMedia;t.node=t.media=$newMedia[0]}else{t.container.find(".mejs-mediaelement").append(t.$media)}t.controls=t.container.find(".mejs-controls");t.layers=t.container.find(".mejs-layers");var tagType=t.isVideo?"video":"audio",capsTagName=tagType.substring(0,1).toUpperCase()+tagType.substring(1);if(t.options[tagType+"Width"]>0||t.options[tagType+"Width"].toString().indexOf("%")>-1){t.width=t.options[tagType+"Width"]}else if(t.media.style.width!==""&&t.media.style.width!==null){t.width=t.media.style.width}else if(t.media.getAttribute("width")!==null){t.width=t.$media.attr("width")}else{t.width=t.options["default"+capsTagName+"Width"]}if(t.options[tagType+"Height"]>0||t.options[tagType+"Height"].toString().indexOf("%")>-1){t.height=t.options[tagType+"Height"]}else if(t.media.style.height!==""&&t.media.style.height!==null){t.height=t.media.style.height}else if(t.$media[0].getAttribute("height")!==null){t.height=t.$media.attr("height")}else{t.height=t.options["default"+capsTagName+"Height"]}t.setPlayerSize(t.width,t.height);meOptions.pluginWidth=t.width;meOptions.pluginHeight=t.height}mejs.MediaElement(t.$media[0],meOptions);if(typeof t.container!="undefined"&&t.controlsAreVisible){t.container.trigger("controlsshown")}},showControls:function(doAnimation){var t=this;doAnimation=typeof doAnimation=="undefined"||doAnimation;if(t.controlsAreVisible)return;if(doAnimation){t.controls.css("visibility","visible").stop(true,true).fadeIn(200,function(){t.controlsAreVisible=true;t.container.trigger("controlsshown")});t.container.find(".mejs-control").css("visibility","visible").stop(true,true).fadeIn(200,function(){t.controlsAreVisible=true})}else{t.controls.css("visibility","visible").css("display","block");t.container.find(".mejs-control").css("visibility","visible").css("display","block");t.controlsAreVisible=true;t.container.trigger("controlsshown")}t.setControlsSize()},hideControls:function(doAnimation){var t=this;doAnimation=typeof doAnimation=="undefined"||doAnimation;if(!t.controlsAreVisible||t.options.alwaysShowControls||t.keyboardAction)return;if(doAnimation){t.controls.stop(true,true).fadeOut(200,function(){$(this).css("visibility","hidden").css("display","block");t.controlsAreVisible=false;t.container.trigger("controlshidden")});t.container.find(".mejs-control").stop(true,true).fadeOut(200,function(){$(this).css("visibility","hidden").css("display","block")})}else{t.controls.css("visibility","hidden").css("display","block");t.container.find(".mejs-control").css("visibility","hidden").css("display","block");t.controlsAreVisible=false;t.container.trigger("controlshidden")}},controlsTimer:null,startControlsTimer:function(timeout){var t=this;timeout=typeof timeout!="undefined"?timeout:1500;t.killControlsTimer("start");t.controlsTimer=setTimeout(function(){t.hideControls();t.killControlsTimer("hide")},timeout)},killControlsTimer:function(src){var t=this;if(t.controlsTimer!==null){clearTimeout(t.controlsTimer);delete t.controlsTimer;t.controlsTimer=null}},controlsEnabled:true,disableControls:function(){var t=this;t.killControlsTimer();t.hideControls(false);this.controlsEnabled=false},enableControls:function(){var t=this;t.showControls(false);t.controlsEnabled=true},meReady:function(media,domNode){var t=this,mf=mejs.MediaFeatures,autoplayAttr=domNode.getAttribute("autoplay"),autoplay=!(typeof autoplayAttr=="undefined"||autoplayAttr===null||autoplayAttr==="false"),featureIndex,feature;if(t.created){return}else{t.created=true}t.media=media;t.domNode=domNode;if(!(mf.isAndroid&&t.options.AndroidUseNativeControls)&&!(mf.isiPad&&t.options.iPadUseNativeControls)&&!(mf.isiPhone&&t.options.iPhoneUseNativeControls)){t.buildposter(t,t.controls,t.layers,t.media);t.buildkeyboard(t,t.controls,t.layers,t.media);t.buildoverlays(t,t.controls,t.layers,t.media);t.findTracks();for(featureIndex in t.options.features){feature=t.options.features[featureIndex];if(t["build"+feature]){try{t["build"+feature](t,t.controls,t.layers,t.media)}catch(e){}}}t.container.trigger("controlsready");t.setPlayerSize(t.width,t.height);t.setControlsSize();if(t.isVideo){if(mejs.MediaFeatures.hasTouch){t.$media.bind("touchstart",function(){if(t.controlsAreVisible){t.hideControls(false)}else{if(t.controlsEnabled){t.showControls(false)}}})}else{t.clickToPlayPauseCallback=function(){if(t.options.clickToPlayPause){if(t.media.paused){t.play()}else{t.pause()}}};t.media.addEventListener("click",t.clickToPlayPauseCallback,false);t.container.bind("mouseenter mouseover",function(){if(t.controlsEnabled){if(!t.options.alwaysShowControls){t.killControlsTimer("enter");t.showControls();t.startControlsTimer(2500)}}}).bind("mousemove",function(){if(t.controlsEnabled){if(!t.controlsAreVisible){t.showControls()}if(!t.options.alwaysShowControls){t.startControlsTimer(2500)}}}).bind("mouseleave",function(){if(t.controlsEnabled){if(!t.media.paused&&!t.options.alwaysShowControls){t.startControlsTimer(1e3)}}})}if(t.options.hideVideoControlsOnLoad){t.hideControls(false)}if(autoplay&&!t.options.alwaysShowControls){t.hideControls()}if(t.options.enableAutosize){t.media.addEventListener("loadedmetadata",function(e){if(t.options.videoHeight<=0&&t.domNode.getAttribute("height")===null&&!isNaN(e.target.videoHeight)){t.setPlayerSize(e.target.videoWidth,e.target.videoHeight);t.setControlsSize();t.media.setVideoSize(e.target.videoWidth,e.target.videoHeight)}},false)}}media.addEventListener("play",function(){var playerIndex;for(playerIndex in mejs.players){var p=mejs.players[playerIndex];if(p.id!=t.id&&t.options.pauseOtherPlayers&&!p.paused&&!p.ended){p.pause()}p.hasFocus=false}t.hasFocus=true},false);t.media.addEventListener("ended",function(e){if(t.options.autoRewind){try{t.media.setCurrentTime(0);window.setTimeout(function(){$(t.container).find(".mejs-overlay-loading").parent().hide()},20)}catch(exp){}}t.media.pause();if(t.setProgressRail){t.setProgressRail()}if(t.setCurrentRail){t.setCurrentRail()}if(t.options.loop){t.play()}else if(!t.options.alwaysShowControls&&t.controlsEnabled){t.showControls()}},false);t.media.addEventListener("loadedmetadata",function(e){if(t.updateDuration){t.updateDuration()}if(t.updateCurrent){t.updateCurrent()}if(!t.isFullScreen){t.setPlayerSize(t.width,t.height);t.setControlsSize()}},false);t.container.focusout(function(e){if(e.relatedTarget){var $target=$(e.relatedTarget);if(t.keyboardAction&&$target.parents(".mejs-container").length===0){t.keyboardAction=false;t.hideControls(true)}}});setTimeout(function(){t.setPlayerSize(t.width,t.height);t.setControlsSize()},50);t.globalBind("resize",function(){if(!(t.isFullScreen||mejs.MediaFeatures.hasTrueNativeFullScreen&&document.webkitIsFullScreen)){t.setPlayerSize(t.width,t.height)}t.setControlsSize()});if(t.media.pluginType=="youtube"&&(mf.isiOS||mf.isAndroid)){t.container.find(".mejs-overlay-play").hide()}}if(autoplay&&media.pluginType=="native"){t.play()}if(t.options.success){if(typeof t.options.success=="string"){window[t.options.success](t.media,t.domNode,t)}else{t.options.success(t.media,t.domNode,t)}}},handleError:function(e){var t=this;t.controls.hide();if(t.options.error){t.options.error(e)}},setPlayerSize:function(width,height){var t=this;if(!t.options.setDimensions){return false}if(typeof width!="undefined"){t.width=width}if(typeof height!="undefined"){t.height=height}if(t.height.toString().indexOf("%")>0||t.$node.css("max-width")==="100%"||t.$node[0].currentStyle&&t.$node[0].currentStyle.maxWidth==="100%"){var nativeWidth=function(){if(t.isVideo){if(t.media.videoWidth&&t.media.videoWidth>0){return t.media.videoWidth}else if(t.media.getAttribute("width")!==null){return t.media.getAttribute("width")}else{return t.options.defaultVideoWidth}}else{return t.options.defaultAudioWidth}}();var nativeHeight=function(){if(t.isVideo){if(t.media.videoHeight&&t.media.videoHeight>0){return t.media.videoHeight}else if(t.media.getAttribute("height")!==null){return t.media.getAttribute("height")}else{return t.options.defaultVideoHeight}}else{return t.options.defaultAudioHeight}}();var parentWidth=t.container.parent().closest(":visible").width(),parentHeight=t.container.parent().closest(":visible").height(),newHeight=t.isVideo||!t.options.autosizeProgress?parseInt(parentWidth*nativeHeight/nativeWidth,10):nativeHeight;if(isNaN(newHeight)){newHeight=parentHeight}if(t.container.parent()[0].tagName.toLowerCase()==="body"){parentWidth=$(window).width();newHeight=$(window).height()}if(newHeight&&parentWidth){t.container.width(parentWidth).height(newHeight);t.$media.add(t.container.find(".mejs-shim")).width("100%").height("100%");if(t.isVideo){if(t.media.setVideoSize){t.media.setVideoSize(parentWidth,newHeight)}}t.layers.children(".mejs-layer").width("100%").height("100%")}}else{t.container.width(t.width).height(t.height);t.layers.children(".mejs-layer").width(t.width).height(t.height)}var playLayer=t.layers.find(".mejs-overlay-play"),playButton=playLayer.find(".mejs-overlay-button");playLayer.height(t.container.height()-t.controls.height());playButton.css("margin-top","-"+(playButton.height()/2-t.controls.height()/2).toString()+"px")},setControlsSize:function(){var t=this,usedWidth=0,railWidth=0,rail=t.controls.find(".mejs-time-rail"),total=t.controls.find(".mejs-time-total"),current=t.controls.find(".mejs-time-current"),loaded=t.controls.find(".mejs-time-loaded"),others=rail.siblings(),lastControl=others.last(),lastControlPosition=null;if(!t.container.is(":visible")||!rail.length||!rail.is(":visible")){return}if(t.options&&!t.options.autosizeProgress){railWidth=parseInt(rail.css("width"),10)}if(railWidth===0||!railWidth){others.each(function(){var $this=$(this);if($this.css("position")!="absolute"&&$this.is(":visible")){usedWidth+=$(this).outerWidth(true)}});railWidth=t.controls.width()-usedWidth-(rail.outerWidth(true)-rail.width())}do{rail.width(railWidth);total.width(railWidth-(total.outerWidth(true)-total.width()));if(lastControl.css("position")!="absolute"){lastControlPosition=lastControl.position();railWidth--}}while(lastControlPosition!==null&&lastControlPosition.top>0&&railWidth>0);if(t.setProgressRail)t.setProgressRail();if(t.setCurrentRail)t.setCurrentRail()},buildposter:function(player,controls,layers,media){var t=this,poster=$('<div class="mejs-poster mejs-layer">'+"</div>").appendTo(layers),posterUrl=player.$media.attr("poster");if(player.options.poster!==""){posterUrl=player.options.poster}if(posterUrl){t.setPoster(posterUrl)}else{poster.hide()}media.addEventListener("play",function(){poster.hide()},false);if(player.options.showPosterWhenEnded&&player.options.autoRewind){media.addEventListener("ended",function(){poster.show()},false)}},setPoster:function(url){var t=this,posterDiv=t.container.find(".mejs-poster"),posterImg=posterDiv.find("img");if(posterImg.length===0){posterImg=$('<img width="100%" height="100%" />').appendTo(posterDiv)}posterImg.attr("src",url);posterDiv.css({"background-image":"url("+url+")"})},buildoverlays:function(player,controls,layers,media){var t=this;if(!player.isVideo)return;var loading=$('<div class="mejs-overlay mejs-layer">'+'<div class="mejs-overlay-loading"><span></span></div>'+"</div>").hide().appendTo(layers),error=$('<div class="mejs-overlay mejs-layer">'+'<div class="mejs-overlay-error"></div>'+"</div>").hide().appendTo(layers),bigPlay=$('<div class="mejs-overlay mejs-layer mejs-overlay-play">'+'<div class="mejs-overlay-button"></div>'+"</div>").appendTo(layers).bind("click",function(){if(t.options.clickToPlayPause){if(media.paused){media.play()}}});media.addEventListener("play",function(){bigPlay.hide();loading.hide();controls.find(".mejs-time-buffering").hide();error.hide()},false);media.addEventListener("playing",function(){bigPlay.hide();loading.hide();controls.find(".mejs-time-buffering").hide();error.hide()},false);media.addEventListener("seeking",function(){loading.show();controls.find(".mejs-time-buffering").show()},false);media.addEventListener("seeked",function(){loading.hide();controls.find(".mejs-time-buffering").hide()},false);media.addEventListener("pause",function(){if(!mejs.MediaFeatures.isiPhone){bigPlay.show()}},false);media.addEventListener("waiting",function(){loading.show();controls.find(".mejs-time-buffering").show()},false);media.addEventListener("loadeddata",function(){loading.show();controls.find(".mejs-time-buffering").show();if(mejs.MediaFeatures.isAndroid){media.canplayTimeout=window.setTimeout(function(){if(document.createEvent){var evt=document.createEvent("HTMLEvents");evt.initEvent("canplay",true,true);return media.dispatchEvent(evt)}},300)}},false);media.addEventListener("canplay",function(){loading.hide();controls.find(".mejs-time-buffering").hide();clearTimeout(media.canplayTimeout)},false);media.addEventListener("error",function(){loading.hide();controls.find(".mejs-time-buffering").hide();error.show();error.find("mejs-overlay-error").html("Error loading this resource")},false);media.addEventListener("keydown",function(e){t.onkeydown(player,media,e)},false)},buildkeyboard:function(player,controls,layers,media){var t=this;t.container.keydown(function(){t.keyboardAction=true});t.globalBind("keydown",function(e){return t.onkeydown(player,media,e)});t.globalBind("click",function(event){player.hasFocus=$(event.target).closest(".mejs-container").length!==0})},onkeydown:function(player,media,e){if(player.hasFocus&&player.options.enableKeyboard){for(var i=0,il=player.options.keyActions.length;i<il;i++){var keyAction=player.options.keyActions[i];for(var j=0,jl=keyAction.keys.length;j<jl;j++){if(e.keyCode==keyAction.keys[j]){if(typeof e.preventDefault=="function")e.preventDefault();keyAction.action(player,media,e.keyCode);return false}}}}return true},findTracks:function(){var t=this,tracktags=t.$media.find("track");t.tracks=[];tracktags.each(function(index,track){track=$(track);t.tracks.push({srclang:track.attr("srclang")?track.attr("srclang").toLowerCase():"",src:track.attr("src"),kind:track.attr("kind"),label:track.attr("label")||"",entries:[],isLoaded:false})})},changeSkin:function(className){this.container[0].className="mejs-container "+className;this.setPlayerSize(this.width,this.height);this.setControlsSize()},play:function(){this.load();this.media.play()},pause:function(){try{this.media.pause()}catch(e){}},load:function(){if(!this.isLoaded){this.media.load()}this.isLoaded=true},setMuted:function(muted){this.media.setMuted(muted)},setCurrentTime:function(time){this.media.setCurrentTime(time)},getCurrentTime:function(){return this.media.currentTime},setVolume:function(volume){this.media.setVolume(volume)},getVolume:function(){return this.media.volume},setSrc:function(src){this.media.setSrc(src)},remove:function(){var t=this,featureIndex,feature;for(featureIndex in t.options.features){feature=t.options.features[featureIndex];if(t["clean"+feature]){try{t["clean"+feature](t)}catch(e){}}}if(!t.isDynamic){t.$media.prop("controls",true);t.$node.clone().insertBefore(t.container).show();t.$node.remove()}else{t.$node.insertBefore(t.container)}if(t.media.pluginType!=="native"){t.media.remove()}delete mejs.players[t.id];if(typeof t.container=="object"){t.container.remove()}t.globalUnbind();delete t.node.player}};(function(){var rwindow=/^((after|before)print|(before)?unload|hashchange|message|o(ff|n)line|page(hide|show)|popstate|resize|storage)\b/;function splitEvents(events,id){var ret={d:[],w:[]};$.each((events||"").split(" "),function(k,v){var eventname=v+"."+id;if(eventname.indexOf(".")===0){ret.d.push(eventname);ret.w.push(eventname)}else{ret[rwindow.test(v)?"w":"d"].push(eventname)}});ret.d=ret.d.join(" ");ret.w=ret.w.join(" ");return ret}mejs.MediaElementPlayer.prototype.globalBind=function(events,data,callback){var t=this;events=splitEvents(events,t.id);if(events.d)$(document).bind(events.d,data,callback);if(events.w)$(window).bind(events.w,data,callback)};mejs.MediaElementPlayer.prototype.globalUnbind=function(events,callback){var t=this;events=splitEvents(events,t.id);if(events.d)$(document).unbind(events.d,callback);if(events.w)$(window).unbind(events.w,callback)}})();if(typeof $!="undefined"){$.fn.mediaelementplayer=function(options){if(options===false){this.each(function(){var player=$(this).data("mediaelementplayer");if(player){player.remove()}$(this).removeData("mediaelementplayer")})}else{this.each(function(){$(this).data("mediaelementplayer",new mejs.MediaElementPlayer(this,options))})}return this};$(document).ready(function(){$(".mejs-player").mediaelementplayer()})}window.MediaElementPlayer=mejs.MediaElementPlayer})(mejs.$);(function($){$.extend(mejs.MepDefaults,{playText:mejs.i18n.t("Play"),pauseText:mejs.i18n.t("Pause")});$.extend(MediaElementPlayer.prototype,{buildplaypause:function(player,controls,layers,media){var t=this,op=t.options,play=$('<div class="mejs-button mejs-playpause-button mejs-play" >'+'<button type="button" aria-controls="'+t.id+'" title="'+op.playText+'" aria-label="'+op.playText+'"></button>'+"</div>").appendTo(controls).click(function(e){e.preventDefault();if(media.paused){media.play()}else{media.pause()}return false}),play_btn=play.find("button");function togglePlayPause(which){if("play"===which){play.removeClass("mejs-play").addClass("mejs-pause");play_btn.attr({title:op.pauseText,"aria-label":op.pauseText})}else{play.removeClass("mejs-pause").addClass("mejs-play");play_btn.attr({title:op.playText,"aria-label":op.playText})}}togglePlayPause("pse");media.addEventListener("play",function(){togglePlayPause("play")},false);media.addEventListener("playing",function(){togglePlayPause("play")},false);media.addEventListener("pause",function(){togglePlayPause("pse")},false);media.addEventListener("paused",function(){togglePlayPause("pse")},false)}})})(mejs.$);(function($){$.extend(mejs.MepDefaults,{stopText:"Stop"});$.extend(MediaElementPlayer.prototype,{buildstop:function(player,controls,layers,media){var t=this,stop=$('<div class="mejs-button mejs-stop-button mejs-stop">'+'<button type="button" aria-controls="'+t.id+'" title="'+t.options.stopText+'" aria-label="'+t.options.stopText+'"></button>'+"</div>").appendTo(controls).click(function(){if(!media.paused){media.pause()}if(media.currentTime>0){media.setCurrentTime(0);media.pause();controls.find(".mejs-time-current").width("0px");controls.find(".mejs-time-handle").css("left","0px");controls.find(".mejs-time-float-current").html(mejs.Utility.secondsToTimeCode(0));controls.find(".mejs-currenttime").html(mejs.Utility.secondsToTimeCode(0));layers.find(".mejs-poster").show()}})}})})(mejs.$);(function($){$.extend(mejs.MepDefaults,{progessHelpText:mejs.i18n.t("Use Left/Right Arrow keys to advance one second, Up/Down arrows to advance ten seconds.")});$.extend(MediaElementPlayer.prototype,{buildprogress:function(player,controls,layers,media){$('<div class="mejs-time-rail">'+'<a href="javascript:void(0);" class="mejs-time-total mejs-time-slider">'+'<span class="mejs-offscreen">'+this.options.progessHelpText+"</span>"+'<span class="mejs-time-buffering"></span>'+'<span class="mejs-time-loaded"></span>'+'<span class="mejs-time-current"></span>'+'<span class="mejs-time-handle"></span>'+'<span class="mejs-time-float">'+'<span class="mejs-time-float-current">00:00</span>'+'<span class="mejs-time-float-corner"></span>'+"</span>"+"</a>"+"</div>").appendTo(controls);controls.find(".mejs-time-buffering").hide();var t=this,total=controls.find(".mejs-time-total"),loaded=controls.find(".mejs-time-loaded"),current=controls.find(".mejs-time-current"),handle=controls.find(".mejs-time-handle"),timefloat=controls.find(".mejs-time-float"),timefloatcurrent=controls.find(".mejs-time-float-current"),slider=controls.find(".mejs-time-slider"),handleMouseMove=function(e){var offset=total.offset(),width=total.outerWidth(true),percentage=0,newTime=0,pos=0,x;if(e.originalEvent.changedTouches){x=e.originalEvent.changedTouches[0].pageX}else{x=e.pageX}if(media.duration){if(x<offset.left){x=offset.left}else if(x>width+offset.left){x=width+offset.left}pos=x-offset.left;percentage=pos/width;newTime=percentage<=.02?0:percentage*media.duration;if(mouseIsDown&&newTime!==media.currentTime){media.setCurrentTime(newTime)}if(!mejs.MediaFeatures.hasTouch){timefloat.css("left",pos);timefloatcurrent.html(mejs.Utility.secondsToTimeCode(newTime));timefloat.show()}}},mouseIsDown=false,mouseIsOver=false,lastKeyPressTime=0,startedPaused=false,autoRewindInitial=player.options.autoRewind;var updateSlider=function(e){var seconds=media.currentTime,timeSliderText=mejs.i18n.t("Time Slider"),time=mejs.Utility.secondsToTimeCode(seconds),duration=media.duration;slider.attr({"aria-label":timeSliderText,"aria-valuemin":0,"aria-valuemax":duration,"aria-valuenow":seconds,"aria-valuetext":time,role:"slider",tabindex:0})};var restartPlayer=function(){var now=new Date;if(now-lastKeyPressTime>=1e3){media.play()}};slider.bind("focus",function(e){player.options.autoRewind=false});slider.bind("blur",function(e){player.options.autoRewind=autoRewindInitial});slider.bind("keydown",function(e){if(new Date-lastKeyPressTime>=1e3){startedPaused=media.paused}var keyCode=e.keyCode,duration=media.duration,seekTime=media.currentTime;switch(keyCode){case 37:seekTime-=1;break;case 39:seekTime+=1;break;case 38:seekTime+=Math.floor(duration*.1);break;case 40:seekTime-=Math.floor(duration*.1);break;case 36:seekTime=0;break;case 35:seekTime=duration;break;case 10:media.paused?media.play():media.pause();return;case 13:media.paused?media.play():media.pause();return;default:return}seekTime=seekTime<0?0:seekTime>=duration?duration:Math.floor(seekTime);lastKeyPressTime=new Date;if(!startedPaused){media.pause()}if(seekTime<media.duration&&!startedPaused){setTimeout(restartPlayer,1100)}media.setCurrentTime(seekTime);e.preventDefault();e.stopPropagation();return false});total.bind("mousedown touchstart",function(e){if(e.which===1||e.which===0){mouseIsDown=true;handleMouseMove(e);t.globalBind("mousemove.dur touchmove.dur",function(e){handleMouseMove(e)});t.globalBind("mouseup.dur touchend.dur",function(e){mouseIsDown=false;timefloat.hide();t.globalUnbind(".dur")})}}).bind("mouseenter",function(e){mouseIsOver=true;t.globalBind("mousemove.dur",function(e){handleMouseMove(e)});if(!mejs.MediaFeatures.hasTouch){timefloat.show()}}).bind("mouseleave",function(e){mouseIsOver=false;if(!mouseIsDown){t.globalUnbind(".dur");timefloat.hide()}});media.addEventListener("progress",function(e){player.setProgressRail(e);player.setCurrentRail(e)},false);media.addEventListener("timeupdate",function(e){player.setProgressRail(e);player.setCurrentRail(e);updateSlider(e)},false);t.loaded=loaded;t.total=total;t.current=current;t.handle=handle},setProgressRail:function(e){var t=this,target=e!==undefined?e.target:t.media,percent=null;if(target&&target.buffered&&target.buffered.length>0&&target.buffered.end&&target.duration){percent=target.buffered.end(0)/target.duration}else if(target&&target.bytesTotal!==undefined&&target.bytesTotal>0&&target.bufferedBytes!==undefined){percent=target.bufferedBytes/target.bytesTotal}else if(e&&e.lengthComputable&&e.total!==0){percent=e.loaded/e.total}if(percent!==null){percent=Math.min(1,Math.max(0,percent));if(t.loaded&&t.total){t.loaded.width(t.total.width()*percent)}}},setCurrentRail:function(){var t=this;if(t.media.currentTime!==undefined&&t.media.duration){if(t.total&&t.handle){var newWidth=Math.round(t.total.width()*t.media.currentTime/t.media.duration),handlePos=newWidth-Math.round(t.handle.outerWidth(true)/2);t.current.width(newWidth);t.handle.css("left",handlePos)}}}})})(mejs.$);(function($){$.extend(mejs.MepDefaults,{duration:-1,timeAndDurationSeparator:"<span> | </span>"});$.extend(MediaElementPlayer.prototype,{buildcurrent:function(player,controls,layers,media){var t=this;$('<div class="mejs-time" role="timer" aria-live="off">'+'<span class="mejs-currenttime">'+(player.options.alwaysShowHours?"00:":"")+(player.options.showTimecodeFrameCount?"00:00:00":"00:00")+"</span>"+"</div>").appendTo(controls);t.currenttime=t.controls.find(".mejs-currenttime");media.addEventListener("timeupdate",function(){player.updateCurrent()},false)},buildduration:function(player,controls,layers,media){var t=this;if(controls.children().last().find(".mejs-currenttime").length>0){$(t.options.timeAndDurationSeparator+'<span class="mejs-duration">'+(t.options.duration>0?mejs.Utility.secondsToTimeCode(t.options.duration,t.options.alwaysShowHours||t.media.duration>3600,t.options.showTimecodeFrameCount,t.options.framesPerSecond||25):(player.options.alwaysShowHours?"00:":"")+(player.options.showTimecodeFrameCount?"00:00:00":"00:00"))+"</span>").appendTo(controls.find(".mejs-time"))}else{controls.find(".mejs-currenttime").parent().addClass("mejs-currenttime-container");$('<div class="mejs-time mejs-duration-container">'+'<span class="mejs-duration">'+(t.options.duration>0?mejs.Utility.secondsToTimeCode(t.options.duration,t.options.alwaysShowHours||t.media.duration>3600,t.options.showTimecodeFrameCount,t.options.framesPerSecond||25):(player.options.alwaysShowHours?"00:":"")+(player.options.showTimecodeFrameCount?"00:00:00":"00:00"))+"</span>"+"</div>").appendTo(controls)}t.durationD=t.controls.find(".mejs-duration");media.addEventListener("timeupdate",function(){player.updateDuration()},false)},updateCurrent:function(){var t=this;if(t.currenttime){t.currenttime.html(mejs.Utility.secondsToTimeCode(t.media.currentTime,t.options.alwaysShowHours||t.media.duration>3600,t.options.showTimecodeFrameCount,t.options.framesPerSecond||25))}},updateDuration:function(){var t=this;t.container.toggleClass("mejs-long-video",t.media.duration>3600);if(t.durationD&&(t.options.duration>0||t.media.duration)){t.durationD.html(mejs.Utility.secondsToTimeCode(t.options.duration>0?t.options.duration:t.media.duration,t.options.alwaysShowHours,t.options.showTimecodeFrameCount,t.options.framesPerSecond||25))}}})})(mejs.$);(function($){$.extend(mejs.MepDefaults,{muteText:mejs.i18n.t("Mute Toggle"),allyVolumeControlText:mejs.i18n.t("Use Up/Down Arrow keys to increase or decrease volume."),hideVolumeOnTouchDevices:true,audioVolume:"horizontal",videoVolume:"vertical"});$.extend(MediaElementPlayer.prototype,{buildvolume:function(player,controls,layers,media){if((mejs.MediaFeatures.isAndroid||mejs.MediaFeatures.isiOS)&&this.options.hideVolumeOnTouchDevices)return;var t=this,mode=t.isVideo?t.options.videoVolume:t.options.audioVolume,mute=mode=="horizontal"?$('<div class="mejs-button mejs-volume-button mejs-mute">'+'<button type="button" aria-controls="'+t.id+'" title="'+t.options.muteText+'" aria-label="'+t.options.muteText+'"></button>'+"</div>"+'<a href="javascript:void(0);" class="mejs-horizontal-volume-slider">'+'<span class="mejs-offscreen">'+t.options.allyVolumeControlText+"</span>"+'<div class="mejs-horizontal-volume-total"></div>'+'<div class="mejs-horizontal-volume-current"></div>'+'<div class="mejs-horizontal-volume-handle"></div>'+"</a>").appendTo(controls):$('<div class="mejs-button mejs-volume-button mejs-mute">'+'<button type="button" aria-controls="'+t.id+'" title="'+t.options.muteText+'" aria-label="'+t.options.muteText+'"></button>'+'<a href="javascript:void(0);" class="mejs-volume-slider">'+'<span class="mejs-offscreen">'+t.options.allyVolumeControlText+"</span>"+'<div class="mejs-volume-total"></div>'+'<div class="mejs-volume-current"></div>'+'<div class="mejs-volume-handle"></div>'+"</a>"+"</div>").appendTo(controls),volumeSlider=t.container.find(".mejs-volume-slider, .mejs-horizontal-volume-slider"),volumeTotal=t.container.find(".mejs-volume-total, .mejs-horizontal-volume-total"),volumeCurrent=t.container.find(".mejs-volume-current, .mejs-horizontal-volume-current"),volumeHandle=t.container.find(".mejs-volume-handle, .mejs-horizontal-volume-handle"),positionVolumeHandle=function(volume,secondTry){if(!volumeSlider.is(":visible")&&typeof secondTry=="undefined"){volumeSlider.show();
positionVolumeHandle(volume,true);volumeSlider.hide();return}volume=Math.max(0,volume);volume=Math.min(volume,1);if(volume===0){mute.removeClass("mejs-mute").addClass("mejs-unmute")}else{mute.removeClass("mejs-unmute").addClass("mejs-mute")}var totalPosition=volumeTotal.position();if(mode=="vertical"){var totalHeight=volumeTotal.height(),newTop=totalHeight-totalHeight*volume;volumeHandle.css("top",Math.round(totalPosition.top+newTop-volumeHandle.height()/2));volumeCurrent.height(totalHeight-newTop);volumeCurrent.css("top",totalPosition.top+newTop)}else{var totalWidth=volumeTotal.width(),newLeft=totalWidth*volume;volumeHandle.css("left",Math.round(totalPosition.left+newLeft-volumeHandle.width()/2));volumeCurrent.width(Math.round(newLeft))}},handleVolumeMove=function(e){var volume=null,totalOffset=volumeTotal.offset();if(mode==="vertical"){var railHeight=volumeTotal.height(),totalTop=parseInt(volumeTotal.css("top").replace(/px/,""),10),newY=e.pageY-totalOffset.top;volume=(railHeight-newY)/railHeight;if(totalOffset.top===0||totalOffset.left===0){return}}else{var railWidth=volumeTotal.width(),newX=e.pageX-totalOffset.left;volume=newX/railWidth}volume=Math.max(0,volume);volume=Math.min(volume,1);positionVolumeHandle(volume);if(volume===0){media.setMuted(true)}else{media.setMuted(false)}media.setVolume(volume)},mouseIsDown=false,mouseIsOver=false;mute.hover(function(){volumeSlider.show();mouseIsOver=true},function(){mouseIsOver=false;if(!mouseIsDown&&mode=="vertical"){volumeSlider.hide()}});var updateVolumeSlider=function(e){var volume=Math.floor(media.volume*100);volumeSlider.attr({"aria-label":mejs.i18n.t("volumeSlider"),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":volume,"aria-valuetext":volume+"%",role:"slider",tabindex:0})};volumeSlider.bind("mouseover",function(){mouseIsOver=true}).bind("mousedown",function(e){handleVolumeMove(e);t.globalBind("mousemove.vol",function(e){handleVolumeMove(e)});t.globalBind("mouseup.vol",function(){mouseIsDown=false;t.globalUnbind(".vol");if(!mouseIsOver&&mode=="vertical"){volumeSlider.hide()}});mouseIsDown=true;return false}).bind("keydown",function(e){var keyCode=e.keyCode;var volume=media.volume;switch(keyCode){case 38:volume+=.1;break;case 40:volume=volume-.1;break;default:return true}mouseIsDown=false;positionVolumeHandle(volume);media.setVolume(volume);return false}).bind("blur",function(){volumeSlider.hide()});mute.find("button").click(function(){media.setMuted(!media.muted)});mute.find("button").bind("focus",function(){volumeSlider.show()});media.addEventListener("volumechange",function(e){if(!mouseIsDown){if(media.muted){positionVolumeHandle(0);mute.removeClass("mejs-mute").addClass("mejs-unmute")}else{positionVolumeHandle(media.volume);mute.removeClass("mejs-unmute").addClass("mejs-mute")}}updateVolumeSlider(e)},false);if(t.container.is(":visible")){positionVolumeHandle(player.options.startVolume);if(player.options.startVolume===0){media.setMuted(true)}if(media.pluginType==="native"){media.setVolume(player.options.startVolume)}}}})})(mejs.$);(function($){$.extend(mejs.MepDefaults,{usePluginFullScreen:true,newWindowCallback:function(){return""},fullscreenText:mejs.i18n.t("Fullscreen")});$.extend(MediaElementPlayer.prototype,{isFullScreen:false,isNativeFullScreen:false,isInIframe:false,buildfullscreen:function(player,controls,layers,media){if(!player.isVideo)return;player.isInIframe=window.location!=window.parent.location;if(mejs.MediaFeatures.hasTrueNativeFullScreen){var func=function(e){if(player.isFullScreen){if(mejs.MediaFeatures.isFullScreen()){player.isNativeFullScreen=true;player.setControlsSize()}else{player.isNativeFullScreen=false;player.exitFullScreen()}}};player.globalBind(mejs.MediaFeatures.fullScreenEventName,func)}var t=this,normalHeight=0,normalWidth=0,container=player.container,fullscreenBtn=$('<div class="mejs-button mejs-fullscreen-button">'+'<button type="button" aria-controls="'+t.id+'" title="'+t.options.fullscreenText+'" aria-label="'+t.options.fullscreenText+'"></button>'+"</div>").appendTo(controls);if(t.media.pluginType==="native"||!t.options.usePluginFullScreen&&!mejs.MediaFeatures.isFirefox){fullscreenBtn.click(function(){var isFullScreen=mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||player.isFullScreen;if(isFullScreen){player.exitFullScreen()}else{player.enterFullScreen()}})}else{var hideTimeout=null,supportsPointerEvents=function(){var element=document.createElement("x"),documentElement=document.documentElement,getComputedStyle=window.getComputedStyle,supports;if(!("pointerEvents"in element.style)){return false}element.style.pointerEvents="auto";element.style.pointerEvents="x";documentElement.appendChild(element);supports=getComputedStyle&&getComputedStyle(element,"").pointerEvents==="auto";documentElement.removeChild(element);return!!supports}();if(supportsPointerEvents&&!mejs.MediaFeatures.isOpera){var fullscreenIsDisabled=false,restoreControls=function(){if(fullscreenIsDisabled){for(var i in hoverDivs){hoverDivs[i].hide()}fullscreenBtn.css("pointer-events","");t.controls.css("pointer-events","");t.media.removeEventListener("click",t.clickToPlayPauseCallback);fullscreenIsDisabled=false}},hoverDivs={},hoverDivNames=["top","left","right","bottom"],i,len,positionHoverDivs=function(){var fullScreenBtnOffsetLeft=fullscreenBtn.offset().left-t.container.offset().left,fullScreenBtnOffsetTop=fullscreenBtn.offset().top-t.container.offset().top,fullScreenBtnWidth=fullscreenBtn.outerWidth(true),fullScreenBtnHeight=fullscreenBtn.outerHeight(true),containerWidth=t.container.width(),containerHeight=t.container.height();for(i in hoverDivs){hoverDivs[i].css({position:"absolute",top:0,left:0})}hoverDivs["top"].width(containerWidth).height(fullScreenBtnOffsetTop);hoverDivs["left"].width(fullScreenBtnOffsetLeft).height(fullScreenBtnHeight).css({top:fullScreenBtnOffsetTop});hoverDivs["right"].width(containerWidth-fullScreenBtnOffsetLeft-fullScreenBtnWidth).height(fullScreenBtnHeight).css({top:fullScreenBtnOffsetTop,left:fullScreenBtnOffsetLeft+fullScreenBtnWidth});hoverDivs["bottom"].width(containerWidth).height(containerHeight-fullScreenBtnHeight-fullScreenBtnOffsetTop).css({top:fullScreenBtnOffsetTop+fullScreenBtnHeight})};t.globalBind("resize",function(){positionHoverDivs()});for(i=0,len=hoverDivNames.length;i<len;i++){hoverDivs[hoverDivNames[i]]=$('<div class="mejs-fullscreen-hover" />').appendTo(t.container).mouseover(restoreControls).hide()}fullscreenBtn.on("mouseover",function(){if(!t.isFullScreen){var buttonPos=fullscreenBtn.offset(),containerPos=player.container.offset();media.positionFullscreenButton(buttonPos.left-containerPos.left,buttonPos.top-containerPos.top,false);fullscreenBtn.css("pointer-events","none");t.controls.css("pointer-events","none");t.media.addEventListener("click",t.clickToPlayPauseCallback);for(i in hoverDivs){hoverDivs[i].show()}positionHoverDivs();fullscreenIsDisabled=true}});media.addEventListener("fullscreenchange",function(e){t.isFullScreen=!t.isFullScreen;if(t.isFullScreen){t.media.removeEventListener("click",t.clickToPlayPauseCallback)}else{t.media.addEventListener("click",t.clickToPlayPauseCallback)}restoreControls()});t.globalBind("mousemove",function(e){if(fullscreenIsDisabled){var fullscreenBtnPos=fullscreenBtn.offset();if(e.pageY<fullscreenBtnPos.top||e.pageY>fullscreenBtnPos.top+fullscreenBtn.outerHeight(true)||e.pageX<fullscreenBtnPos.left||e.pageX>fullscreenBtnPos.left+fullscreenBtn.outerWidth(true)){fullscreenBtn.css("pointer-events","");t.controls.css("pointer-events","");fullscreenIsDisabled=false}}})}else{fullscreenBtn.on("mouseover",function(){if(hideTimeout!==null){clearTimeout(hideTimeout);delete hideTimeout}var buttonPos=fullscreenBtn.offset(),containerPos=player.container.offset();media.positionFullscreenButton(buttonPos.left-containerPos.left,buttonPos.top-containerPos.top,true)}).on("mouseout",function(){if(hideTimeout!==null){clearTimeout(hideTimeout);delete hideTimeout}hideTimeout=setTimeout(function(){media.hideFullscreenButton()},1500)})}}player.fullscreenBtn=fullscreenBtn;t.globalBind("keydown",function(e){if((mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||t.isFullScreen)&&e.keyCode==27){player.exitFullScreen()}})},cleanfullscreen:function(player){player.exitFullScreen()},containerSizeTimeout:null,enterFullScreen:function(){var t=this;if(t.media.pluginType!=="native"&&(mejs.MediaFeatures.isFirefox||t.options.usePluginFullScreen)){return}$(document.documentElement).addClass("mejs-fullscreen");normalHeight=t.container.height();normalWidth=t.container.width();if(t.media.pluginType==="native"){if(mejs.MediaFeatures.hasTrueNativeFullScreen){mejs.MediaFeatures.requestFullScreen(t.container[0]);if(t.isInIframe){setTimeout(function checkFullscreen(){if(t.isNativeFullScreen){var zoomMultiplier=window["devicePixelRatio"]||1;var percentErrorMargin=.002;var windowWidth=zoomMultiplier*$(window).width();var screenWidth=screen.width;var absDiff=Math.abs(screenWidth-windowWidth);var marginError=screenWidth*percentErrorMargin;if(absDiff>marginError){t.exitFullScreen()}else{setTimeout(checkFullscreen,500)}}},500)}}else if(mejs.MediaFeatures.hasSemiNativeFullScreen){t.media.webkitEnterFullscreen();return}}if(t.isInIframe){var url=t.options.newWindowCallback(this);if(url!==""){if(!mejs.MediaFeatures.hasTrueNativeFullScreen){t.pause();window.open(url,t.id,"top=0,left=0,width="+screen.availWidth+",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no");return}else{setTimeout(function(){if(!t.isNativeFullScreen){t.pause();window.open(url,t.id,"top=0,left=0,width="+screen.availWidth+",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no")}},250)}}}t.container.addClass("mejs-container-fullscreen").width("100%").height("100%");t.containerSizeTimeout=setTimeout(function(){t.container.css({width:"100%",height:"100%"});t.setControlsSize()},500);if(t.media.pluginType==="native"){t.$media.width("100%").height("100%")}else{t.container.find(".mejs-shim").width("100%").height("100%");t.media.setVideoSize($(window).width(),$(window).height())}t.layers.children("div").width("100%").height("100%");if(t.fullscreenBtn){t.fullscreenBtn.removeClass("mejs-fullscreen").addClass("mejs-unfullscreen")}t.setControlsSize();t.isFullScreen=true;t.container.find(".mejs-captions-text").css("font-size",screen.width/t.width*1*100+"%");t.container.find(".mejs-captions-position").css("bottom","45px")},exitFullScreen:function(){var t=this;clearTimeout(t.containerSizeTimeout);if(t.media.pluginType!=="native"&&mejs.MediaFeatures.isFirefox){t.media.setFullscreen(false);return}if(mejs.MediaFeatures.hasTrueNativeFullScreen&&(mejs.MediaFeatures.isFullScreen()||t.isFullScreen)){mejs.MediaFeatures.cancelFullScreen()}$(document.documentElement).removeClass("mejs-fullscreen");t.container.removeClass("mejs-container-fullscreen").width(normalWidth).height(normalHeight);if(t.media.pluginType==="native"){t.$media.width(normalWidth).height(normalHeight)}else{t.container.find(".mejs-shim").width(normalWidth).height(normalHeight);t.media.setVideoSize(normalWidth,normalHeight)}t.layers.children("div").width(normalWidth).height(normalHeight);t.fullscreenBtn.removeClass("mejs-unfullscreen").addClass("mejs-fullscreen");t.setControlsSize();t.isFullScreen=false;t.container.find(".mejs-captions-text").css("font-size","");t.container.find(".mejs-captions-position").css("bottom","")}})})(mejs.$);(function($){$.extend(mejs.MepDefaults,{speeds:["2.00","1.50","1.25","1.00","0.75"],defaultSpeed:"1.00",speedChar:"x"});$.extend(MediaElementPlayer.prototype,{buildspeed:function(player,controls,layers,media){var t=this;if(t.media.pluginType=="native"){var speedButton=null,speedSelector=null,playbackSpeed=null,html='<div class="mejs-button mejs-speed-button">'+'<button type="button">'+t.options.defaultSpeed+t.options.speedChar+"</button>"+'<div class="mejs-speed-selector">'+"<ul>";if($.inArray(t.options.defaultSpeed,t.options.speeds)===-1){t.options.speeds.push(t.options.defaultSpeed)}t.options.speeds.sort(function(a,b){return parseFloat(b)-parseFloat(a)});for(var i=0,il=t.options.speeds.length;i<il;i++){html+="<li>"+'<input type="radio" name="speed" '+'value="'+t.options.speeds[i]+'" '+'id="'+t.options.speeds[i]+'" '+(t.options.speeds[i]==t.options.defaultSpeed?" checked":"")+" />"+'<label for="'+t.options.speeds[i]+'" '+(t.options.speeds[i]==t.options.defaultSpeed?' class="mejs-speed-selected"':"")+">"+t.options.speeds[i]+t.options.speedChar+"</label>"+"</li>"}html+="</ul></div></div>";speedButton=$(html).appendTo(controls);speedSelector=speedButton.find(".mejs-speed-selector");playbackspeed=t.options.defaultSpeed;speedSelector.on("click",'input[type="radio"]',function(){var newSpeed=$(this).attr("value");playbackspeed=newSpeed;media.playbackRate=parseFloat(newSpeed);speedButton.find("button").html("test"+newSpeed+t.options.speedChar);speedButton.find(".mejs-speed-selected").removeClass("mejs-speed-selected");speedButton.find('input[type="radio"]:checked').next().addClass("mejs-speed-selected")});speedSelector.height(speedButton.find(".mejs-speed-selector ul").outerHeight(true)+speedButton.find(".mejs-speed-translations").outerHeight(true)).css("top",-1*speedSelector.height()+"px")}}})})(mejs.$);(function($){$.extend(mejs.MepDefaults,{startLanguage:"",tracksText:mejs.i18n.t("Captions/Subtitles"),hideCaptionsButtonWhenEmpty:true,toggleCaptionsButtonWhenOnlyOne:false,slidesSelector:""});$.extend(MediaElementPlayer.prototype,{hasChapters:false,buildtracks:function(player,controls,layers,media){if(player.tracks.length===0)return;var t=this,i,options="";if(t.domNode.textTracks){for(i=t.domNode.textTracks.length-1;i>=0;i--){t.domNode.textTracks[i].mode="hidden"}}player.chapters=$('<div class="mejs-chapters mejs-layer"></div>').prependTo(layers).hide();player.captions=$('<div class="mejs-captions-layer mejs-layer"><div class="mejs-captions-position mejs-captions-position-hover" role="log" aria-live="assertive" aria-atomic="false"><span class="mejs-captions-text"></span></div></div>').prependTo(layers).hide();player.captionsText=player.captions.find(".mejs-captions-text");player.captionsButton=$('<div class="mejs-button mejs-captions-button">'+'<button type="button" aria-controls="'+t.id+'" title="'+t.options.tracksText+'" aria-label="'+t.options.tracksText+'"></button>'+'<div class="mejs-captions-selector">'+"<ul>"+"<li>"+'<input type="radio" name="'+player.id+'_captions" id="'+player.id+'_captions_none" value="none" checked="checked" />'+'<label for="'+player.id+'_captions_none">'+mejs.i18n.t("None")+"</label>"+"</li>"+"</ul>"+"</div>"+"</div>").appendTo(controls);var subtitleCount=0;for(i=0;i<player.tracks.length;i++){if(player.tracks[i].kind=="subtitles"){subtitleCount++}}if(t.options.toggleCaptionsButtonWhenOnlyOne&&subtitleCount==1){player.captionsButton.on("click",function(){if(player.selectedTrack===null){lang=player.tracks[0].srclang}else{lang="none"}player.setTrack(lang)})}else{player.captionsButton.on("mouseenter focusin",function(){$(this).find(".mejs-captions-selector").css("visibility","visible")}).on("click","input[type=radio]",function(){lang=this.value;player.setTrack(lang)});player.captionsButton.on("mouseleave focusout",function(){$(this).find(".mejs-captions-selector").css("visibility","hidden")})}if(!player.options.alwaysShowControls){player.container.bind("controlsshown",function(){player.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover")}).bind("controlshidden",function(){if(!media.paused){player.container.find(".mejs-captions-position").removeClass("mejs-captions-position-hover")}})}else{player.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover")}player.trackToLoad=-1;player.selectedTrack=null;player.isLoadingTrack=false;for(i=0;i<player.tracks.length;i++){if(player.tracks[i].kind=="subtitles"){player.addTrackButton(player.tracks[i].srclang,player.tracks[i].label)}}player.loadNextTrack();media.addEventListener("timeupdate",function(e){player.displayCaptions()},false);if(player.options.slidesSelector!==""){player.slidesContainer=$(player.options.slidesSelector);media.addEventListener("timeupdate",function(e){player.displaySlides()},false)}media.addEventListener("loadedmetadata",function(e){player.displayChapters()},false);player.container.hover(function(){if(player.hasChapters){player.chapters.css("visibility","visible");player.chapters.fadeIn(200).height(player.chapters.find(".mejs-chapter").outerHeight())}},function(){if(player.hasChapters&&!media.paused){player.chapters.fadeOut(200,function(){$(this).css("visibility","hidden");$(this).css("display","block")})}});if(player.node.getAttribute("autoplay")!==null){player.chapters.css("visibility","hidden")}},setTrack:function(lang){var t=this,i;if(lang=="none"){t.selectedTrack=null;t.captionsButton.removeClass("mejs-captions-enabled")}else{for(i=0;i<t.tracks.length;i++){if(t.tracks[i].srclang==lang){if(t.selectedTrack===null)t.captionsButton.addClass("mejs-captions-enabled");t.selectedTrack=t.tracks[i];t.captions.attr("lang",t.selectedTrack.srclang);t.displayCaptions();break}}}},loadNextTrack:function(){var t=this;t.trackToLoad++;if(t.trackToLoad<t.tracks.length){t.isLoadingTrack=true;t.loadTrack(t.trackToLoad)}else{t.isLoadingTrack=false;t.checkForTracks()}},loadTrack:function(index){var t=this,track=t.tracks[index],after=function(){track.isLoaded=true;t.enableTrackButton(track.srclang,track.label);t.loadNextTrack()};$.ajax({url:track.src,dataType:"text",success:function(d){if(typeof d=="string"&&/<tt\s+xml/gi.exec(d)){track.entries=mejs.TrackFormatParser.dfxp.parse(d)}else{track.entries=mejs.TrackFormatParser.webvtt.parse(d)}after();if(track.kind=="chapters"){t.media.addEventListener("play",function(e){if(t.media.duration>0){t.displayChapters(track)}},false)}if(track.kind=="slides"){t.setupSlides(track)}},error:function(){t.loadNextTrack()}})},enableTrackButton:function(lang,label){var t=this;if(label===""){label=mejs.language.codes[lang]||lang}t.captionsButton.find("input[value="+lang+"]").prop("disabled",false).siblings("label").html(label);if(t.options.startLanguage==lang){$("#"+t.id+"_captions_"+lang).prop("checked",true).trigger("click")}t.adjustLanguageBox()},addTrackButton:function(lang,label){var t=this;if(label===""){label=mejs.language.codes[lang]||lang}t.captionsButton.find("ul").append($("<li>"+'<input type="radio" name="'+t.id+'_captions" id="'+t.id+"_captions_"+lang+'" value="'+lang+'" disabled="disabled" />'+'<label for="'+t.id+"_captions_"+lang+'">'+label+" (loading)"+"</label>"+"</li>"));t.adjustLanguageBox();t.container.find(".mejs-captions-translations option[value="+lang+"]").remove()},adjustLanguageBox:function(){var t=this;t.captionsButton.find(".mejs-captions-selector").height(t.captionsButton.find(".mejs-captions-selector ul").outerHeight(true)+t.captionsButton.find(".mejs-captions-translations").outerHeight(true))},checkForTracks:function(){var t=this,hasSubtitles=false;if(t.options.hideCaptionsButtonWhenEmpty){for(i=0;i<t.tracks.length;i++){if(t.tracks[i].kind=="subtitles"){hasSubtitles=true;break}}if(!hasSubtitles){t.captionsButton.hide();t.setControlsSize()}}},displayCaptions:function(){if(typeof this.tracks=="undefined")return;var t=this,i,track=t.selectedTrack;if(track!==null&&track.isLoaded){for(i=0;i<track.entries.times.length;i++){if(t.media.currentTime>=track.entries.times[i].start&&t.media.currentTime<=track.entries.times[i].stop){t.captionsText.html(track.entries.text[i]).attr("class","mejs-captions-text "+(track.entries.times[i].identifier||""));t.captions.show().height(0);return}}t.captions.hide()}else{t.captions.hide()}},setupSlides:function(track){var t=this;t.slides=track;t.slides.entries.imgs=[t.slides.entries.text.length];t.showSlide(0)},showSlide:function(index){if(typeof this.tracks=="undefined"||typeof this.slidesContainer=="undefined"){return}var t=this,url=t.slides.entries.text[index],img=t.slides.entries.imgs[index];if(typeof img=="undefined"||typeof img.fadeIn=="undefined"){t.slides.entries.imgs[index]=img=$('<img src="'+url+'">').on("load",function(){img.appendTo(t.slidesContainer).hide().fadeIn().siblings(":visible").fadeOut()})}else{if(!img.is(":visible")&&!img.is(":animated")){img.fadeIn().siblings(":visible").fadeOut()}}},displaySlides:function(){if(typeof this.slides=="undefined")return;var t=this,slides=t.slides,i;for(i=0;i<slides.entries.times.length;i++){if(t.media.currentTime>=slides.entries.times[i].start&&t.media.currentTime<=slides.entries.times[i].stop){t.showSlide(i);return}}},displayChapters:function(){var t=this,i;for(i=0;i<t.tracks.length;i++){if(t.tracks[i].kind=="chapters"&&t.tracks[i].isLoaded){t.drawChapters(t.tracks[i]);t.hasChapters=true;break}}},drawChapters:function(chapters){var t=this,i,dur,percent=0,usedPercent=0;t.chapters.empty();for(i=0;i<chapters.entries.times.length;i++){dur=chapters.entries.times[i].stop-chapters.entries.times[i].start;percent=Math.floor(dur/t.media.duration*100);if(percent+usedPercent>100||i==chapters.entries.times.length-1&&percent+usedPercent<100){percent=100-usedPercent}t.chapters.append($('<div class="mejs-chapter" rel="'+chapters.entries.times[i].start+'" style="left: '+usedPercent.toString()+"%;width: "+percent.toString()+'%;">'+'<div class="mejs-chapter-block'+(i==chapters.entries.times.length-1?" mejs-chapter-block-last":"")+'">'+'<span class="ch-title">'+chapters.entries.text[i]+"</span>"+'<span class="ch-time">'+mejs.Utility.secondsToTimeCode(chapters.entries.times[i].start)+"&ndash;"+mejs.Utility.secondsToTimeCode(chapters.entries.times[i].stop)+"</span>"+"</div>"+"</div>"));usedPercent+=percent}t.chapters.find("div.mejs-chapter").click(function(){t.media.setCurrentTime(parseFloat($(this).attr("rel")));if(t.media.paused){t.media.play()}});t.chapters.show()}});mejs.language={codes:{af:"Afrikaans",sq:"Albanian",ar:"Arabic",be:"Belarusian",bg:"Bulgarian",ca:"Catalan",zh:"Chinese","zh-cn":"Chinese Simplified","zh-tw":"Chinese Traditional",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",et:"Estonian",fl:"Filipino",fi:"Finnish",fr:"French",gl:"Galician",de:"German",el:"Greek",ht:"Haitian Creole",iw:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",ga:"Irish",it:"Italian",ja:"Japanese",ko:"Korean",lv:"Latvian",lt:"Lithuanian",mk:"Macedonian",ms:"Malay",mt:"Maltese",no:"Norwegian",fa:"Persian",pl:"Polish",pt:"Portuguese",ro:"Romanian",ru:"Russian",sr:"Serbian",sk:"Slovak",sl:"Slovenian",es:"Spanish",sw:"Swahili",sv:"Swedish",tl:"Tagalog",th:"Thai",tr:"Turkish",uk:"Ukrainian",vi:"Vietnamese",cy:"Welsh",yi:"Yiddish"}};mejs.TrackFormatParser={webvtt:{pattern_timecode:/^((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\> ((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,parse:function(trackText){var i=0,lines=mejs.TrackFormatParser.split2(trackText,/\r?\n/),entries={text:[],times:[]},timecode,text,identifier;for(;i<lines.length;i++){timecode=this.pattern_timecode.exec(lines[i]);if(timecode&&i<lines.length){if(i-1>=0&&lines[i-1]!==""){identifier=lines[i-1]}i++;text=lines[i];i++;while(lines[i]!==""&&i<lines.length){text=text+"\n"+lines[i];i++}text=$.trim(text).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>");entries.text.push(text);entries.times.push({identifier:identifier,start:mejs.Utility.convertSMPTEtoSeconds(timecode[1])===0?.2:mejs.Utility.convertSMPTEtoSeconds(timecode[1]),stop:mejs.Utility.convertSMPTEtoSeconds(timecode[3]),settings:timecode[5]})}identifier=""}return entries}},dfxp:{parse:function(trackText){trackText=$(trackText).filter("tt");var i=0,container=trackText.children("div").eq(0),lines=container.find("p"),styleNode=trackText.find("#"+container.attr("style")),styles,begin,end,text,entries={text:[],times:[]};if(styleNode.length){var attributes=styleNode.removeAttr("id").get(0).attributes;if(attributes.length){styles={};for(i=0;i<attributes.length;i++){styles[attributes[i].name.split(":")[1]]=attributes[i].value}}}for(i=0;i<lines.length;i++){var style;var _temp_times={start:null,stop:null,style:null};if(lines.eq(i).attr("begin"))_temp_times.start=mejs.Utility.convertSMPTEtoSeconds(lines.eq(i).attr("begin"));if(!_temp_times.start&&lines.eq(i-1).attr("end"))_temp_times.start=mejs.Utility.convertSMPTEtoSeconds(lines.eq(i-1).attr("end"));if(lines.eq(i).attr("end"))_temp_times.stop=mejs.Utility.convertSMPTEtoSeconds(lines.eq(i).attr("end"));if(!_temp_times.stop&&lines.eq(i+1).attr("begin"))_temp_times.stop=mejs.Utility.convertSMPTEtoSeconds(lines.eq(i+1).attr("begin"));if(styles){style="";for(var _style in styles){style+=_style+":"+styles[_style]+";"}}if(style)_temp_times.style=style;if(_temp_times.start===0)_temp_times.start=.2;entries.times.push(_temp_times);text=$.trim(lines.eq(i).html()).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>");entries.text.push(text);if(entries.times.start===0)entries.times.start=2}return entries}},split2:function(text,regex){return text.split(regex)}};if("x\n\ny".split(/\n/gi).length!=3){mejs.TrackFormatParser.split2=function(text,regex){var parts=[],chunk="",i;for(i=0;i<text.length;i++){chunk+=text.substring(i,i+1);if(regex.test(chunk)){parts.push(chunk.replace(regex,""));chunk=""}}parts.push(chunk);return parts}}})(mejs.$);(function($){$.extend(mejs.MepDefaults,{contextMenuItems:[{render:function(player){if(typeof player.enterFullScreen=="undefined")return null;if(player.isFullScreen){return mejs.i18n.t("Turn off Fullscreen")}else{return mejs.i18n.t("Go Fullscreen")}},click:function(player){if(player.isFullScreen){player.exitFullScreen()}else{player.enterFullScreen()}}},{render:function(player){if(player.media.muted){return mejs.i18n.t("Unmute")}else{return mejs.i18n.t("Mute")}},click:function(player){if(player.media.muted){player.setMuted(false)}else{player.setMuted(true)}}},{isSeparator:true},{render:function(player){return mejs.i18n.t("Download Video")},click:function(player){window.location.href=player.media.currentSrc}}]});$.extend(MediaElementPlayer.prototype,{buildcontextmenu:function(player,controls,layers,media){player.contextMenu=$('<div class="mejs-contextmenu"></div>').appendTo($("body")).hide();player.container.bind("contextmenu",function(e){if(player.isContextMenuEnabled){e.preventDefault();player.renderContextMenu(e.clientX-1,e.clientY-1);return false}});player.container.bind("click",function(){player.contextMenu.hide()});player.contextMenu.bind("mouseleave",function(){player.startContextMenuTimer()})},cleancontextmenu:function(player){player.contextMenu.remove()},isContextMenuEnabled:true,enableContextMenu:function(){this.isContextMenuEnabled=true},disableContextMenu:function(){this.isContextMenuEnabled=false},contextMenuTimeout:null,startContextMenuTimer:function(){var t=this;t.killContextMenuTimer();t.contextMenuTimer=setTimeout(function(){t.hideContextMenu();t.killContextMenuTimer()},750)},killContextMenuTimer:function(){var timer=this.contextMenuTimer;if(timer!=null){clearTimeout(timer);delete timer;timer=null}},hideContextMenu:function(){this.contextMenu.hide()},renderContextMenu:function(x,y){var t=this,html="",items=t.options.contextMenuItems;for(var i=0,il=items.length;i<il;i++){if(items[i].isSeparator){html+='<div class="mejs-contextmenu-separator"></div>'}else{var rendered=items[i].render(t);if(rendered!=null){html+='<div class="mejs-contextmenu-item" data-itemindex="'+i+'" id="element-'+Math.random()*1e6+'">'+rendered+"</div>"}}}t.contextMenu.empty().append($(html)).css({top:y,left:x}).show();t.contextMenu.find(".mejs-contextmenu-item").each(function(){var $dom=$(this),itemIndex=parseInt($dom.data("itemindex"),10),item=t.options.contextMenuItems[itemIndex];if(typeof item.show!="undefined")item.show($dom,t);$dom.click(function(){if(typeof item.click!="undefined")item.click(t);t.contextMenu.hide()})});setTimeout(function(){t.killControlsTimer("rev3")},100)}})})(mejs.$);(function($){$.extend(mejs.MepDefaults,{postrollCloseText:mejs.i18n.t("Close")});$.extend(MediaElementPlayer.prototype,{buildpostroll:function(player,controls,layers,media){var t=this,postrollLink=t.container.find('link[rel="postroll"]').attr("href");if(typeof postrollLink!=="undefined"){player.postroll=$('<div class="mejs-postroll-layer mejs-layer"><a class="mejs-postroll-close" onclick="$(this).parent().hide();return false;">'+t.options.postrollCloseText+'</a><div class="mejs-postroll-layer-content"></div></div>').prependTo(layers).hide();t.media.addEventListener("ended",function(e){$.ajax({dataType:"html",url:postrollLink,success:function(data,textStatus){layers.find(".mejs-postroll-layer-content").html(data)}});player.postroll.show()},false)}}})})(mejs.$);