@model HomePageVM

@{
    ViewData["Title"] = SettingsManager.Site.SiteName;
}
@section Header{
    <meta name="keywords" content="">
    <meta name="description" content="">
    <link href="~/plugins/swiper/css/swiper.min.css" rel="stylesheet" />
    @*<link href="~/plugins/mediaelement/mediaelementplayer.min.css" rel="stylesheet" />*@
}


@*@await Component.InvokeAsync("HomeWorks")
@await Component.InvokeAsync("HomeArticles")
@await Component.InvokeAsync("HomePosts")
@await Component.InvokeAsync("HomeClients")
    *@

<section class="s0">
    <div class="sliders swiper-container wow fadeInUp">
        <div class="swiper-wrapper">
            @foreach (var item in Model.Adverts)
            {
                <div class="swiper-slide"><a href="@item.WebLink"><img src="@item.ImageUrl" alt="@item.Title"></a></div>
            }          
        </div>
        <div class="swiper-button-next"><i class="iconfont icon-next"></i></div>
        <div class="swiper-button-prev"><i class="iconfont icon-prev"></i></div>
    </div>

    <div class="gupiao">
        <div class="container">
            <div class="gupiao-container wow fadeInUp">
                <div class="row align-items-center justify-content-between">
                    <div class="col-md-auto">
                        <div class="name">仕佳光子</div>
                    </div>
                    <div class="col-md-auto">
                        <div class="code">股票代码：688313</div>
                    </div>
                    <div class="col-md-auto">
                        <div class="row no-gutters align-items-center">
                            <div class="col-auto">
                                <div class="val" id="gpPrice">00.00</div>
                            </div>
                            <div class="col-auto">
                                <div class="up"> <i class="iconfont" id="gpIcon"></i>  <span id="gpZfAmount">0.00</span> <span id="gpZfBi">(0.00%)</span></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-auto"><span id="gpDate">0000-00-00  00:00:00</span> <span id="gpStatus"></span> （北京时间）</div>
                    <div class="col-md-auto">
                        <ul class="zhishu">
                            <li>今天  <span id="todayMax">00.00</span></li>
                            <li>昨收  <span id="gpYesPrice">00.00</span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<div class="page page-home">
    <section class="section s1 container">
        <div class="intro">
            <h2 class="title">引领光通信核心领域技术进步</h2>
            <p>公司聚焦光通信行业，主营业务覆盖光芯片及器件、室内光缆、线缆材料三大板块，主要产品包括PLC分路器芯片系列产品、AWG芯片系列产品、DFB激光器芯片系列产品、光纤连接器、室内光缆、线缆材料等。公司产品主要应用于骨干网和城域网、光纤到户、数据中心、4G/5G建设等，成功实现了部分光芯片产品的国产化和进口替代。</p>
            <a class="more" href="/products">了解更多</a>
        </div>
    </section>
    <section class="section s2">
        <section class="solutions swiper-container wow fadeInUp">
            <div class="swiper-wrapper">
                @foreach (var item in Model.Solutions)
                {
                    <div class="swiper-slide" style="background-image:url('@item.ImageUrl');">
                        <div class="container">
                            <div class="des">
                                <h3 class="title">@item.Title</h3>
                                <h4 class="subtitle">@item.SubTitle</h4>
                                <p>@item.Description</p><a class="more" asp-controller="solutions" asp-action="detail" asp-route-id="@item.Id">查看更多 <i class="iconfont icon-next"></i></a>
                            </div>
                        </div>
                    </div>
                }

              
            </div>
            <div class="swiper-button-next"><i class="iconfont icon-next"></i></div>
            <div class="swiper-button-prev"><i class="iconfont icon-prev"></i></div>
        </section>
    </section>
    <section class="s3 section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-auto">
                    <div class="ziben">
                        <div class="row">
                            <div class="col-12 col-md-4 col-lg-12">
                                <div class="box">
                                    <div class="row align-items-end no-gutters">
                                        <div class="col-auto">
                                            <div class="num">
                                                <div class="numup">4.59</div><span>+ </span>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="unit">亿元</div>
                                        </div>
                                    </div>
                                    <div class="name">注册资本 </div>
                                </div>
                            </div>
                            <div class="col-6 col-md-4 col-lg-12">
                                <div class="box">
                                    <div class="row align-items-end no-gutters">
                                        <div class="col-auto">
                                            <div class="num">
                                                <div class="numup">107</div><span>+ </span>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="unit">项</div>
                                        </div>
                                    </div>
                                    <div class="name">拥有授权专利</div>
                                </div>
                            </div>
                            <div class="col-6 col-md-4 col-lg-12">
                                <div class="box">
                                    <div class="row align-items-end no-gutters">
                                        <div class="col-auto">
                                            <div class="num">
                                                <div class="numup">50</div><span>+ </span>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="unit">%</div>
                                        </div>
                                    </div>
                                    <div class="name">PLC全球市场份额</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg">
                    @if (Model.Video != null)
                    {
                        <div class="video-container">
                            <video src="@Model.Video.VideoUrl" poster="@Model.Video.Cover" width="100%" height="100%" controls="controls"></video>
                        </div>
                    }

                </div>
            </div>
        </div>
    </section>
    <section class="s4 section">
        <div class="title-section">
            <h2 class="text-center">服务全球</h2>
        </div>
        <div class="service" style="position:relative;">
            <img src="/assets/img/map.png" alt="服务全球">
        
            @foreach (var item in Model.Shopes)
            {

                @if (item.IconType == 1)
                {
                    <div class="dot" style="left:@string.Format("{0}%", item.ToLeft);top:@string.Format("{0}%", item.ToTop);">
                        <div class="city">@item.Name</div>
                     
                    </div>
                }
                else
                {
        <div class="star" style="left:@string.Format("{0}%", item.ToLeft);top:@string.Format("{0}%", item.ToTop);">
            <img src="/assets/img/star.png" title="@item.Name" />
            <div class="city">@item.Name</div>
        </div>
                }

            }
        </div>
</section>
</div>

@section Scripts
    {
    <script src="~/plugins/swiper/js/swiper.min.js"></script>
    @*<script src="~/plugins/mediaelement/mediaelement-and-player.min.js"></script>*@
    <script src="~/plugins/counterup/waypoints.min.js"></script>
    <script src="~/plugins/counterup/jquery.counterup.min.js"></script>
    <!-- Google Analytics -->
    <script>
        //Make sure that the dom is ready
        var swiper = new Swiper('.sliders', {
            //- pagination: {
            //-     el: '.swiper-pagination',
            //-     clickable: true
            //- },
            autoplay: {
                delay: 2500,
                disableOnInteraction: false,
            },
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
        });

        $(function () {

            //$('video, audio').mediaelementplayer();

            $('.numup').counterUp({
                delay: 10, // the delay time in ms
                time: 2000 // the speed time in ms
            });


            var nowDate = new Date();            
            var timestamp = formateDate(nowDate);

         
            var url = 'https://route.showapi.com/131-46?needIndex=0&showapi_appid=308875&showapi_timestamp=' + timestamp + '&stocks=sh688313&showapi_sign=2a8b841438ab4bb2bd6c2405975fc11c';
         
            $.getJSON(url, function (data) {
                var r = data.showapi_res_body.list;
                $("#todayMax").html(r[0].todayMax);
                var dt = r[0].date + " " + r[0].time;
                $('#gpDate').html(dt);
                $('#gpPrice').html(r[0].nowPrice);
                $('#gpYesPrice').text(r[0].closePrice);
                console.log(r[0]);

                if (r[0].time < "09:30:00") {
                    var aaaa = "未开盘";
                } else if ("09:30:00" < r[0].time && r[0].time < "11:30:00") {
                    var aaaa = "开盘中";
                } else if ("13:00:00" < r[0].time && r[0].time < "15:00:00") {
                    var aaaa = "开盘中";
                } else {
                    var aaaa = "已收盘";
                }

                $("#gpStatus").html(aaaa);

                $('#gpZfAmount').text(r[0].diff_money);
                var zfbi = '(' + r[0].diff_rate + '%)';

                $('#gpZfBi').text(zfbi);

                if (parseFloat(r[0].diff_rate) > 0) {
                    $("#gpIcon").addClass('icon-shangzhuang');
                }
                if (parseFloat(r[0].diff_rate) < 0) {
                    $("#gpIcon").addClass('icon-xiadie');
                }
            });

        });

        function formateDate(time) {
            let year = time.getFullYear()
            let month = time.getMonth() + 1
            let day = time.getDate()
            let hour = time.getHours();
            let minute = time.getMinutes();
            let second = time.getSeconds();

            if (month < 10) {
                month = '0' + month
            }

            if (day < 10) {
                day = '0' + day
            }
            if (hour < 10) {
                hour = '0' + hour
            }

            if (minute < 10) {
                minute = '0' + minute
            }

            if (second < 10) {
                second = '0' + second
            }

            return year.toString() + month.toString() + day.toString() + hour.toString() + minute.toString() + second.toString();

        }


        var swiper = new Swiper('.solutions', {

            spaceBetween: 0,
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
            //- pagination: {
            //-     el: '.swiper-pagination',
            //-     clickable: true,
            //- },
        });
    </script>

}
